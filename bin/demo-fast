#!/usr/bin/env bash
set -euxo pipefail

bin/demo-cleanup

DFX_NETWORK=local
export DFX_NETWORK

dfx start --clean --background
sleep 1

dfx nns install

dfx nns import
dfx sns import


rm -fr "$HOME/.config/dfx/identity/snsdemo8"
dfx identity new --disable-encryption snsdemo8
dfx identity use snsdemo8

bin/dfx-ledger-get-icp --icp 900000000
bin/dfx-neuron-create  --icp 500000000
bin/dfx-neuron-prolong

./bin/dfx-sns-whitelist-me

./bin/dfx-sns-config-random
./bin/dfx-sns-deploy

dfx canister id sns_root
dfx canister id sns_governance
dfx canister id sns_ledger
dfx canister id sns_swap
